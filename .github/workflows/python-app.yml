- name: Run tests with coverage (parallel)
  run: |
    set -euo pipefail
    pip install -U pip
    pip install pytest pytest-cov pytest-xdist coverage
    pytest -q -n auto --dist loadfile \
      --cov=. \
      --cov-report=term-missing:skip-covered \
      --cov-report=xml:coverage.xml
